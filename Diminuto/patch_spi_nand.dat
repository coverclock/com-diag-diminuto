diff -purN u-boot-1.1.1.orig/CHANGELOG u-boot-1.1.1.test/CHANGELOG
--- u-boot-1.1.1.orig/CHANGELOG	Sun Apr 25 17:41:35 2004
+++ u-boot-1.1.1.test/CHANGELOG	Fri Jun 25 03:23:12 2004
@@ -2,6 +2,11 @@
 Changes for U-Boot 1.1.1:
 ======================================================================
 
+* Patch by Nicolas Lacressonniere, 24 Jun 2004
+  Small Bugs fixes for "at91rm9200dk" board
+  - Timings Modifications for SPI DataFlash accesses.
+  - Fix NandFlash Detection Bug
+  
 * Patch by Travis Sawyer, 23 Apr 2004:
   Fix VSC/CIS 8201 phy descrambler interoperability timing due to
   errata from Vitesse Semiconductor.
diff -purN u-boot-1.1.1.orig/board/at91rm9200dk/at91rm9200dk.c u-boot-1.1.1.test/board/at91rm9200dk/at91rm9200dk.c
--- u-boot-1.1.1.orig/board/at91rm9200dk/at91rm9200dk.c	Thu Sep 11 21:49:01 2003
+++ u-boot-1.1.1.test/board/at91rm9200dk/at91rm9200dk.c	Fri Jun 25 03:16:12 2004
@@ -102,6 +112,10 @@ void nand_init (void)
 	*AT91C_PIOB_PER = AT91C_PIO_PB1;	/* enable direct output enable */
 	*AT91C_PIOB_ODR = AT91C_PIO_PB1;	/* disable output */
 
+	/* PIOB and PIOC clock enabling */
+	*AT91C_PMC_PCER = 1 << AT91C_ID_PIOB;
+	*AT91C_PMC_PCER = 1 << AT91C_ID_PIOC;
+	
 	if (*AT91C_PIOB_PDSR & AT91C_PIO_PB1)
 		printf ("  No SmartMedia card inserted\n");
 #ifdef DEBUG
diff -purN u-boot-1.1.1.orig/common/cmd_nand.c u-boot-1.1.1.test/common/cmd_nand.c
--- u-boot-1.1.1.orig/common/cmd_nand.c	Sun Apr 18 21:43:39 2004
+++ u-boot-1.1.1.test/common/cmd_nand.c	Fri Jun 25 05:50:33 2004
@@ -20,6 +20,10 @@
 
 #if (CONFIG_COMMANDS & CFG_CMD_NAND)
 
+#ifdef CONFIG_AT91RM9200DK
+#include <asm/arch/hardware.h>
+#endif
+
 #include <linux/mtd/nand.h>
 #include <linux/mtd/nand_ids.h>
 #include <jffs2/jffs2.h>
diff -purN u-boot-1.1.1.orig/cpu/at91rm9200/at45.c u-boot-1.1.1.test/cpu/at91rm9200/at45.c
--- u-boot-1.1.1.orig/cpu/at91rm9200/at45.c	Sun Dec  7 00:55:11 2003
+++ u-boot-1.1.1.test/cpu/at91rm9200/at45.c	Fri Jun 25 01:19:05 2004
@@ -25,7 +25,14 @@
 #ifdef CONFIG_HAS_DATAFLASH
 #include <dataflash.h>
 
-#define SPI_CLK 5000000
+#define AT91C_SPI_CLK	10000000	/* Max Value = 10MHz to be compliant to
+the Continuous Array Read function */
+
+/* AC Characteristics */
+/* DLYBS = tCSS = 250ns min and DLYBCT = tCSH = 250ns */
+#define DATAFLASH_TCSS	(0xC << 16)
+#define DATAFLASH_TCHS	(0x1 << 24)
+
 #define AT91C_TIMEOUT_WRDY			200000
 #define AT91C_SPI_PCS0_SERIAL_DATAFLASH		0xE     /* Chip Select 0 : NPCS0 %1110 */
 #define AT91C_SPI_PCS3_DATAFLASH_CARD		0x7     /* Chip Select 3 : NPCS3 %0111 */
@@ -50,9 +57,11 @@ void AT91F_SpiInit(void) {
 	AT91C_BASE_SPI->SPI_MR = AT91C_SPI_MSTR | AT91C_SPI_MODFDIS | AT91C_SPI_PCS;
 
 	/* Configure CS0 and CS3 */
-	*(AT91C_SPI_CSR + 0) = AT91C_SPI_CPOL | (AT91C_SPI_DLYBS & 0x100000) | ((AT91C_MASTER_CLOCK / (2*SPI_CLK)) << 8);
+	*(AT91C_SPI_CSR + 0) = AT91C_SPI_CPOL | (AT91C_SPI_DLYBS & DATAFLASH_TCSS) | (AT91C_SPI_DLYBCT &
+	DATAFLASH_TCHS) | ((AT91C_MASTER_CLOCK / (2*AT91C_SPI_CLK)) << 8);
 
-	*(AT91C_SPI_CSR + 3) = AT91C_SPI_CPOL | (AT91C_SPI_DLYBS & 0x100000) | ((AT91C_MASTER_CLOCK / (2*SPI_CLK)) << 8);
+	*(AT91C_SPI_CSR + 3) = AT91C_SPI_CPOL | (AT91C_SPI_DLYBS & DATAFLASH_TCSS) | (AT91C_SPI_DLYBCT &
+	DATAFLASH_TCHS) | ((AT91C_MASTER_CLOCK / (2*AT91C_SPI_CLK)) << 8);
 
 }
 
diff -purN u-boot-1.1.1.orig/include/asm-arm/arch-at91rm9200/AT91RM9200.h u-boot-1.1.1.test/include/asm-arm/arch-at91rm9200/AT91RM9200.h
--- u-boot-1.1.1.orig/include/asm-arm/arch-at91rm9200/AT91RM9200.h	Fri Jun 27 23:32:42 2003
+++ u-boot-1.1.1.test/include/asm-arm/arch-at91rm9200/AT91RM9200.h	Fri Jun 25 03:17:42 2004
@@ -459,6 +459,8 @@ typedef struct _AT91S_PDC {
 #define AT91C_ID_TC0    ((unsigned int) 17) /* Timer Counter 0 */
 #define AT91C_ID_EMAC   ((unsigned int) 24) /* Ethernet MAC */
 #define AT91C_ID_SPI    ((unsigned int) 13) /* Serial Peripheral Interface */
+#define AT91C_ID_PIOB	((unsigned int) 3)
+#define AT91C_ID_PIOC	((unsigned int) 4)
 
 #define AT91C_PIO_PC1        ((unsigned int) 1 <<  1) /* Pin Controlled by PC1 */
 #define AT91C_PC1_BFRDY_SMOE ((unsigned int) AT91C_PIO_PC1) /*  Burst Flash Ready */
